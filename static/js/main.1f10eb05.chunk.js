(this.webpackJsonpsuperheroes=this.webpackJsonpsuperheroes||[]).push([[0],{47:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),i=a.n(c),s=(a(47),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,78)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),c(e),i(e)}))}),o=a(10),l=a(3),u=a(1),d=function(e){var t=e.children;return Object(u.jsx)("div",{className:"container-sm d-flex align-items-center flex-column",children:t})},m=a(13),j=function(e){var t=e.section,a=Object(n.useState)(""),r=Object(o.a)(a,2),c=r[0],i=r[1],s=Object(n.useState)(""),l=Object(o.a)(s,2),d=l[0],j=l[1],b=Object(n.useState)(""),h=Object(o.a)(b,2),p=h[0],O=h[1];return Object(n.useEffect)((function(){"home"===t&&j("active"),"search"===t&&O("active")})),Object(u.jsx)("ul",{className:"navbar bg-primary navbar-expand-md navbar-dark sticky-top",children:Object(u.jsxs)("div",{className:"container-sm justify-content-start",children:[Object(u.jsx)("button",{onClick:function(e){e.preventDefault(),i((function(e){return""===e?"show":""}))},className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"main-nav",children:Object(u.jsx)("span",{className:"navbar-toggler-icon"})}),Object(u.jsx)("div",{className:"collapse navbar-collapse justify-content-start align-center "+c,id:"main-nav",children:Object(u.jsxs)("ul",{className:"navbar-nav",children:[Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(m.b,{className:"nav-link ".concat(d),to:"/",children:"Home"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(m.b,{className:"nav-link ".concat(p),to:"/search",children:"B\xfasqueda"})})]})})]})})},b=function(e){var t=e.id,a=e.photo,n=e.title,r=e.fields,c=e.buttons,i=void 0===c?[]:c,s=e.history,o=e.details,l=void 0!==o&&o,d=e.search,m=void 0!==d&&d;return Object(u.jsx)("div",{className:!0===l?"col-12 col-md-8":"col-sm-12 col-md-6 col-lg-4 mb-3",children:Object(u.jsx)("div",{className:"card h-100",children:Object(u.jsxs)("div",{className:"card-body text-center p-3 d-flex flex-column",children:[Object(u.jsx)("img",{alt:"",onError:function(e){e.target.src="./imageNotAvailable.png"},className:"card-img-top ".concat(!0===m?"h-75":"h-50"," w-100"),src:a}),Object(u.jsx)("h1",{className:"card-title text-primary display-6",children:n}),Object(u.jsx)("div",{className:"card-text",children:r.map((function(e,t){return Object(u.jsxs)("div",{children:[Object(u.jsx)("b",{children:e[0]}),Object(u.jsx)("span",{children:"null"===e[1]?" No Disponible":" "+e[1]})]},t)}))}),Object(u.jsx)("div",{className:"d-flex mt-auto justify-content-center",children:0!==i.length&&i.map((function(e,a){return"string"===typeof e.linkOrFunction?Object(u.jsx)("a",{className:"btn btn-outline-primary m-2 d-flex align-items-center",onClick:function(){return s.push("".concat(e.linkOrFunction+t))},children:e.name},a):Object(u.jsx)("a",{className:"btn btn-outline-primary m-2 d-flex align-items-center",id:t,onClick:e.linkOrFunction,children:e.name},a)}))})]})})})},h=function(e,t){var a=[];return e.forEach((function(e){0===t?a.push([]):1===t?a.push([["Inteligencia:",e.powerstats.intelligence],["Fuerza:",e.powerstats.strength],["Velocidad:",e.powerstats.speed],["Durabilidad:",e.powerstats.durability],["Poder:",e.powerstats.power],["Combate:",e.powerstats.combat]]):2===t&&a.push([["Peso:",e.appearance.weight[0]+" / "+e.appearance.weight[1]],["Altura:",e.appearance.height[0]+" / "+e.appearance.height[1]],["Alias:",e.biography.aliases.map((function(t,a){return a<e.biography.aliases.length-1?t+", ":t+"."}))],["Color de Ojos:",e.appearance["eye-color"]],["Color de Cabello:",e.appearance["hair-color"]],["Lugar de trabajo:",e.work.base]])})),{items:e,fields:a}},p=function(e){var t=e.items,a=e.type,r=e.buttons,c=e.history,i=e.search,s=void 0!==i&&i,o=h(t,a),l=o.items.map((function(e,t){return Object(u.jsx)(b,{id:e.id,photo:e.image.url,title:e.name,fields:o.fields[t],buttons:r,history:c,search:s},t)}));return Object(u.jsx)("div",{className:"container w-75",children:Object(u.jsx)("div",{className:"row",children:l.map((function(e,t){return Object(u.jsx)(n.Fragment,{children:e},t)}))})})};var O=a(2),f=a(16),g=a.n(f),v="START_QUERY",x="END_QUERY",y="SET_TOKEN",N="LOGOUT",E="ERASE_HERO",k="SET_SEARCH",w="SET_TEAM",F="SET_DETAIL",S="SET_TEAM_AVERAGE",A="SET_TEAM_CUMULATIVE",T="SET_CUMULATIVE_ORDER";function C(){return{type:v}}function I(){return{type:x}}function V(e){return{type:y,token:e}}function R(e){return{type:k,searchValue:e}}function D(e){return{type:w,teamValue:e}}var P=function(e){return function(t,a){t(C()),g.a.get("".concat(a().path).concat(e)).then((function(e){var a=h([e.data],2);t({type:F,detailValue:a})})).catch((function(e){alert(e),t(I())}))}},_=function(e){var t=e.stateToForceReRender,a=Object(O.c)((function(e){return e.teamAverage})),r=Object(O.c)((function(e){return e.cumulativeOrder})),c=Object(O.c)((function(e){return e.team})),i=Object(O.b)();return Object(n.useEffect)((function(){var e=function(e){var t={intelligence:0,strength:0,speed:0,durability:0,power:0,combat:0},a={altura:0,peso:0},n=0,r=0;e.forEach((function(e){if(Object.keys(t).forEach((function(a){t[a]=isNaN(parseInt(e.powerstats[a]))?t[a]:t[a]+parseInt(e.powerstats[a])}))," cm"===e.appearance.height[1].slice(-3)){var a=e.appearance.height[1].split(" ");a=parseInt(a[0]),n+=a}if(" kg"===e.appearance.weight[1].slice(-3)){var c=e.appearance.weight[1].split(" ");c=parseInt(c[0]),r+=c}})),n=0===e.length?0:n/e.length,r=0===e.length?0:r/e.length,a.altura=n,a.peso=r;var c,i=Object.entries(t),s=0;i.map((function(e,t){e[1]>s&&(s=e[1],c=t)}));var o=i.splice(c,1);return i.unshift(o[0]),{teamCumulativeValue:t,cumulativeOrderValue:i,teamAverageValue:a}}(c),t=e.teamCumulativeValue,a=e.cumulativeOrderValue,n=e.teamAverageValue;i({type:A,teamCumulative:t}),i(function(e){return{type:T,cumulativeOrder:e}}(a)),i(function(e){return{type:S,teamAverage:e}}(n))}),[t]),Object(u.jsx)("div",{id:"cumulative",className:"d-flex justify-content-center",children:Object(u.jsxs)("div",{className:"border border-primary d-flex flex-wrap p-3 m-3 align-items-start rounded",children:[Object(u.jsxs)("div",{className:"d-flex flex-column me-5 mb-3",children:[Object(u.jsx)("h3",{className:"text-primary",children:"ACUMULATIVO"}),0!==r.length&&r.map((function(e,t){return Object(u.jsxs)("span",{className:"text-secondary",children:[Object(u.jsxs)("b",{className:"text-capitalize",children:[(a=e[0],"intelligence"===a?"Inteligencia":"strength"===a?"Fuerza":"speed"===a?"Velocidad":"durability"===a?"Durabilidad":"power"===a?"Poder":"combat"===a?"Combate":void 0),":"]})," ",e[1]]},t);var a}))]}),Object(u.jsxs)("div",{className:"d-flex flex-column",children:[Object(u.jsx)("h3",{className:"text-primary",children:"PROMEDIOS"}),Object(u.jsxs)("span",{className:"text-secondary",children:[Object(u.jsx)("b",{children:"Altura:"})," ",a.altura.toFixed(2)," cm"]}),Object(u.jsxs)("span",{className:"text-secondary",children:[Object(u.jsx)("b",{children:"Peso:"})," ",a.peso.toFixed(2)," kg"]})]})]})})},L=function(e,t,a){t!==localStorage.getItem("loginToken")&&e(a(""))},U=function(e){var t=e.history,a=Object(O.c)((function(e){return e.token})),r=Object(O.c)((function(e){return e.team})),c=Object(O.b)(),i=Object(n.useState)(0),s=Object(o.a)(i,2),l=s[0],m=s[1];var b=[{name:"Ver Detalle",linkOrFunction:"/details/"},{name:"Eliminar",linkOrFunction:function(e){var t;e.preventDefault(),c((t=e.target.id,{type:E,eraseId:t})),m((function(e){return++e}))}}];return Object(n.useEffect)((function(){L(c,a,V)}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(j,{section:"home"}),Object(u.jsxs)(d,{children:[Object(u.jsx)("h1",{className:"display-1 text-primary m-3",children:"EQUIPO"}),Object(u.jsx)(_,{stateToForceReRender:l}),0===r.length?Object(u.jsx)("div",{children:"No hay miembros en el equipo todav\xeda."}):Object(u.jsx)(p,{items:r,type:1,buttons:b,history:t})]})]})},q=a(17),M=function(e){var t=e.initialValues,a=e.submitFunction,n=e.validateFunction,r=e.submit,c=void 0!==r&&r,i=Object.keys(t);return Object(u.jsx)(q.d,{initialValues:t,onSubmit:a,validate:n,children:function(e){var t=e.errors;return Object(u.jsxs)(q.c,{className:"d-flex flex-column w-50",children:[i.map((function(e,a){return Object(u.jsxs)("div",{className:"mb-3",children:[Object(u.jsx)("div",{children:Object(u.jsx)(q.b,{className:"form-control",name:e,type:"pass"===e?"password":"text"})}),Object(u.jsx)("div",{children:Object(u.jsx)(q.a,{name:e,component:function(){return Object(u.jsx)("span",{className:"text-danger",children:t[e]})}})})]},a)})),!1!==c&&Object(u.jsx)("input",{className:"btn btn-primary mt-3 mb-5",type:"submit",value:c})]})}})},B=a(42),z=function(e){var t=e.history,a=Object(O.c)((function(e){return e.team})),r=Object(O.c)((function(e){return e.token})),c=Object(O.c)((function(e){return e.search})),i=Object(O.b)();var s=[{name:"Agregar al Equipo",linkOrFunction:function(e){e.preventDefault(),function(e,t,a,n,r,c){if(0===a.filter((function(t){return t.id===e})).length)if(a.length<6){var i=r.filter((function(t){return t.id===e}));if(i=i[0],a.filter((function(e){return"bad"===e.biography.alignment})).length<3&&"bad"===i.biography.alignment||a.filter((function(e){return"good"===e.biography.alignment})).length<3&&"good"===i.biography.alignment){var s=r;s=s.filter((function(t){return t.id!==e})),t(n([].concat(Object(B.a)(a),[i]))),t(c(s))}else"good"!==i.biography.alignment&&"bad"!==i.biography.alignment?alert("En el equipo solamente pueden agregarse personajes que sean buenos o malos."):alert("En el equipo solamente pueden agregarse hasta tres miembros buenos y hasta tres miembros malos. Est\xe1s agregando uno de m\xe1s.")}else alert("El equipo puede tener hasta 6 miembros");else alert("Este superh\xe9roe ya est\xe1 agregado al equipo.")}(e.target.id,i,a,D,c,R)}}];return Object(n.useEffect)((function(){L(i,r,V)}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(j,{section:"search"}),Object(u.jsxs)(d,{children:[Object(u.jsx)("h1",{className:"display-1 text-primary m-3",children:"BUSCADOR"}),Object(u.jsx)(M,{initialValues:{heroName:""},submitFunction:function(e,t){var a,n=t.resetForm,r={heroName:e.heroName,resetForm:n};i((a=r,function(e,t){e(C());var n=a.heroName,r=a.resetForm;g()({method:"get",url:"".concat(t().path,"search/").concat(n)}).then((function(t){if(t.data.error)alert(t.data.error),e(R([])),r();else if(void 0!==t.data.results){var a=t.data.results;e(R(a))}})).catch((function(t){alert(t),e(I()),r()}))}))},validateFunction:function(e){var t={};return e.heroName||(t.heroName="Por favor ingresar un nombre de personaje para buscar."),t},submit:"Buscar"}),0!==c.length&&Object(u.jsx)(p,{items:c,type:0,buttons:s,history:t,search:!0})]})]})},H=function(e){var t=e.match,a=Object(O.c)((function(e){return e.detail})),r=Object(O.c)((function(e){return e.token})),c=Object(O.b)(),i=t.params.id;return Object(n.useEffect)((function(){void 0!==a&&null!==a&&a.items[0].id===i||c(P(i))})),Object(n.useEffect)((function(){L(c,r,V)})),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(j,{}),Object(u.jsx)(d,{children:Object(u.jsx)("div",{className:"mt-5 d-flex justify-content-center align-items-center",children:null!==a&&void 0!==a&&a.items[0].id===i?a.items.map((function(e,t){return Object(u.jsx)(b,{id:e.id,photo:e.image.url,title:e.name,fields:a.fields[t],details:!0},t)})):""})})]})},Q=r.a.createContext(),G=r.a.createContext(),J=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),i=Object(o.a)(c,2),s=i[0],d=i[1];return Object(u.jsx)(G.Provider,{value:{search:s,setSearch:d},children:Object(u.jsx)(Q.Provider,{value:{team:a,setTeam:r},children:Object(u.jsxs)(l.d,{children:[Object(u.jsx)(l.b,{exact:!0,path:"/",component:U}),Object(u.jsx)(l.b,{exact:!0,path:"/search",component:z}),Object(u.jsx)(l.b,{exact:!0,path:"/details/:id",component:H}),Object(u.jsx)(l.a,{to:"/"})]})})})},Y=a(27),K={isLoading:!1,token:void 0,team:[],search:[],detail:void 0,teamAverage:{altura:0,peso:0},teamCumulative:{intelligence:0,strength:0,speed:0,durability:0,power:0,combat:0},cumulativeOrder:[],path:"https://www.superheroapi.com/api.php/10224262264160982/"},W=a(41),X=Object(Y.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object.assign({},e,{isLoading:!0});case x:return Object.assign({},e,{isLoading:!1});case y:return localStorage.setItem("loginToken",t.token),Object.assign({},e,{token:t.token,isLoading:!1});case N:return localStorage.setItem("loginToken",""),Object.assign({},e,{token:void 0});case E:var a,n=e.team,r=t.eraseId;return n.forEach((function(e,t){e.id!==r||(a=t)})),n.splice(a,1),Object.assign({},e,{team:n});case k:return Object.assign({},e,{search:t.searchValue});case w:return Object.assign({},e,{team:t.teamValue});case F:return Object.assign({},e,{detail:t.detailValue});case S:return Object.assign({},e,{teamAverage:t.teamAverage});case A:return Object.assign({},e,{teamCumulative:t.teamCumulative});case T:return Object.assign({},e,{cumulativeOrder:t.cumulativeOrder});default:return e}}),Object(Y.a)(W.a)),Z=X,$=function(){return Object(u.jsxs)(d,{children:[Object(u.jsx)("h1",{className:"display-1 text-primary m-3 text-center",children:"INICIAR SESI\xd3N"}),Object(u.jsx)(M,{initialValues:{mail:"",pass:""},submitFunction:function(e,t){var a=t.resetForm,n={email:e.mail,password:e.pass,resetForm:a};Z.dispatch(function(e){return function(t){t(C()),g()({method:"post",url:"http://challenge-react.alkemy.org/",data:{email:e.email,password:e.password}}).then((function(e){t(V(e.data.token))})).catch((function(a){alert(a),t(I()),e.resetForm()}))}}(n))},validateFunction:function(e){var t={};return e.mail||(t.mail="Por favor ingresar un e-mail para continuar."),e.pass||(t.pass="Por favor ingresa password para continuar."),t},submit:"Ingresar"})]})},ee=function(){return Object(u.jsxs)(l.d,{children:[Object(u.jsx)(l.b,{exact:!0,path:"/",component:$}),Object(u.jsx)(l.a,{to:"/"})]})},te=function(){var e=Object(O.c)((function(e){return e.token}));return Object(u.jsx)(m.a,{children:""!==e&&localStorage.getItem("loginToken")===e?Object(u.jsx)(J,{}):Object(u.jsx)(ee,{})})};a(76);i.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(O.a,{store:Z,children:Object(u.jsx)(te,{})})}),document.getElementById("root")),s()}},[[77,1,2]]]);
//# sourceMappingURL=main.1f10eb05.chunk.js.map